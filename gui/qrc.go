package main

// This file is automatically generated by gopkg.in/qml.v1/cmd/genqrc

import (
	"io/ioutil"
	"os"
	"path/filepath"

	"gopkg.in/qml.v1"
)

func init() {
	var r *qml.Resources
	var err error
	if os.Getenv("QRC_REPACK") == "1" {
		err = qrcRepackResources()
		if err != nil {
			panic("cannot repack qrc resources: " + err.Error())
		}
		r, err = qml.ParseResources(qrcResourcesRepacked)
	} else {
		r, err = qml.ParseResourcesString(qrcResourcesData)
	}
	if err != nil {
		panic("cannot parse bundled resources data: " + err.Error())
	}
	qml.LoadResources(r)
}

func qrcRepackResources() error {
	subdirs := []string{"qml"}
	var rp qml.ResourcesPacker
	for _, subdir := range subdirs {
		err := filepath.Walk(subdir, func(path string, info os.FileInfo, err error) error {
			if err != nil {
				return err
			}
			if info.IsDir() {
				return nil
			}
			data, err := ioutil.ReadFile(path)
			if err != nil {
				return err
			}
			rp.Add(filepath.ToSlash(path), data)
			return nil
		})
		if err != nil {
			return err
		}
	}
	qrcResourcesRepacked = rp.Pack().Bytes()
	return nil
}

var qrcResourcesRepacked []byte
var qrcResourcesData = "qres\x00\x00\x00\x01\x00\x00\a`\x00\x00\x00\x14\x00\x00\a&\x00\x00\a\x0eimport QtQuick 2.2\nimport QtQuick.Controls 1.1\nimport QtQuick.Layouts 1.1\n\nApplicationWindow {\n\tid: newConversationWindow\n\tsignal sendMessage(string to, string subject, string message)\n\n    visible: true\n    title: \"New Conversation\"\n    property int margin: 5\n    width: mainLayout.implicitWidth + 2 * margin\n    height: mainLayout.implicitHeight + 2 * margin\n    minimumWidth: mainLayout.Layout.minimumWidth + 40 * margin\n    minimumHeight: mainLayout.Layout.minimumHeight + 12 * margin\n\n\tAction {\n\t\tid: sendMessage\n\t\ttext: \"Send &Message\"\n\t\tshortcut: \"Ctrl+Return\"\n\t\tonTriggered: {\n\t\t\tnewConversationWindow.sendMessage(toField.text, subjectField.text, messageArea.text)\n\t\t}\n\t}\n\n    ColumnLayout {\n        id: mainLayout\n        anchors.fill: parent\n        anchors.margins: margin\n\t\tRowLayout {\n\t\t\tText {text: \"To:\"}\n\t\t\t\tTextField {\n\t\t\t\t\tid: toField\n\t\t\t\t\t\tfocus: true\n\t\t\t\t\t\tplaceholderText: \"dename names, comma-separated\"\n\t\t\t\t\t\tLayout.fillWidth: true\n\t\t\t\t\t\tonAccepted: {subjectField.focus = true}\n\t\t\t\t}\n\t\t}\n\n\t\tRowLayout {\n\t\t\tText {text: \"Subject:\"}\n\t\t\t\tTextField {\n\t\t\t\t\tid: subjectField\n\t\t\t\t\tLayout.fillWidth: true\n\t\t\t\t\tonAccepted: {messageArea.selectAll(); messageArea.focus = true}\n\t\t\t\t}\n\t\t}\n\n\n\t\tTextArea {\n\t\t\tid: messageArea \n\t\t\ttext: \"Write the message here and press Ctrl+Return to send\"\n\t\t\tLayout.minimumHeight: 10\n\t\t\tLayout.fillWidth: true\n\t\t\tLayout.fillHeight: true\n\t\t\ttextFormat: TextEdit.PlainText\n\t\t\twrapMode: TextEdit.Wrap\n\t\t\t/* andreser: the following works for me\n\t\t\tkeys.onreturnpressed: {\n\t\t\t\tconsole.log(\"return pressed in main textarea\");\n\t\t\t}\n\t\t\t*/\n\t\t}\n\n\t\t/*\n        GroupBox {\n            id: sendMessageButton\n            Layout.alignment: Qt.AlignRight\n            flat: true\n\t\t\tButton {\n\t\t\t\ttext: \"Send Message\"\n\t\t\t\tonClicked: {sendMessage.trigger()}\n\t\t\t}\n        }\n\t\t*/\n    }\n}\n\x00\x03\x00\x00x<\x00q\x00m\x00l\x00\x14\a|\xd6|\x00n\x00e\x00w\x00-\x00c\x00o\x00n\x00v\x00e\x00r\x00s\x00a\x00t\x00i\x00o\x00n\x00.\x00q\x00m\x00l\x00\x00\x00\x00\x00\x02\x00\x00\x00\x01\x00\x00\x00\x01\x00\x00\x00\x00\x00\x02\x00\x00\x00\x01\x00\x00\x00\x02\x00\x00\x00\f\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00"
